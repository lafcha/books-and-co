{% extends 'base.html.twig' %}

{% block title %}Hello SearchController!
{% endblock %}

{% block javascripts %}
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="assets/js/county.js"></script>
	<script src="assets/js/city.js"></script>
	<script src="assets/js/countyAndCityApp.js"></script>
{% endblock %}

{% block main %}

	{{ form_start(form) }}
	<div class="mt-5 flex justify-between flex-nowrap items-center">
		<div id="county-error"></div>
		<div class="relative inline-flex">
			<svg class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 412 232"><path d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z" fill="#648299" fill-rule="nonzero"/></svg>
			<select name="search_form[county]" class="rounded-full text-white h-10 pl-5 pr-10 bg-blue-900 focus:outline-none appearance-none county-form" id="search_form_county">
				<option value="00">Département</option>
			</select>
		</div>
		<div id="city-error"></div>
		<div class="relative inline-flex">
			<svg class="w-2 h-2 absolute top-0 right-0 m-4 pointer-events-none" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 412 232"><path d="M206 171.144L42.678 7.822c-9.763-9.763-25.592-9.763-35.355 0-9.763 9.764-9.763 25.592 0 35.355l181 181c4.88 4.882 11.279 7.323 17.677 7.323s12.796-2.441 17.678-7.322l181-181c9.763-9.764 9.763-25.592 0-35.355-9.763-9.763-25.592-9.763-35.355 0L206 171.144z" fill="#648299" fill-rule="nonzero"/></svg>
			<select name="search_form[city]" class="rounded-full text-white h-10 pl-5 pr-10 bg-blue-900 focus:outline-none appearance-none city-form" id="search_form_city">
				<option value="00">Commune</option>
			</select>
		</div>
		<button type="submit" class="btn">Filtrer</button>
	</div>
	{{ form_end(form) }}


	{% if app.request.query.all != null and book == null %}
		<section class="text-gray-600 body-font">
			<div class="container px-5 py-24 mx-auto">
				<div class="xl:w-1/2 lg:w-3/4 w-full mx-auto text-center">
					<i class="fas fa-heart-broken text-red-500 text-4xl mb-5"></i>
					<p class="leading-relaxed text-lg">Désolé, aucun livre n'est disponible dans ce département !</p>
					<span class="inline-block h-1 w-10 rounded bg-indigo-500 mt-8 mb-6"></span>
				</div>
			</div>
		</section>
	{% else %}
			<section class="text-gray-600 body-font overflow-hidden">
				<div class="container px-5 py-24 mx-auto">
		{% for usersbook in book %}
					<div class="-my-8 divide-y-2 divide-gray-100">
						<div class="py-8 flex flex-wrap md:flex-nowrap">
							<div class="md:w-1/12 md:mb-0 mb-6 flex-shrink-0 mr-10 flex flex-col">
								<img src="{{ asset('assets/img/bookcover/') ~ usersbook.book.cover }}">
							</div>
							<div class="md:flex-grow">
								<h2 class="text-2xl font-medium text-gray-900 title-font mb-2">{{ usersbook.book.title }}</h2>
								<p class="leading-relaxed">Auteur : {{ usersbook.book.author }}</p>
								<p class="italic">Editeur : {{ usersbook.book.editor }}</p>
								<p class="italic">ISBN : {{ usersbook.book.isbn }}</p>
							</div>
						</div>
					</div>
					<hr class="my-10 border-1 border-blue-900">
		{% endfor %}
				</div>
			</section>
			
	{% endif %}


{% endblock %}
